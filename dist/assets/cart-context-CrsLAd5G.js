import{a as o,p as x}from"./chunk-PVWAREVJ-5q7UTObr.js";const l=o.createContext(void 0);function m({children:n}){const[s,a]=o.useState([]);o.useEffect(()=>{const t=localStorage.getItem("shoppingCart");if(t)try{a(JSON.parse(t))}catch(r){console.error("Failed to parse cart from localStorage",r)}},[]),o.useEffect(()=>{localStorage.setItem("shoppingCart",JSON.stringify(s))},[s]);const C=t=>{a(r=>r.find(e=>e.id===t.id)?r.map(e=>e.id===t.id?{...e,quantity:e.quantity+1}:e):[...r,{...t,quantity:1}])},c=t=>{a(r=>r.filter(i=>i.id!==t))},d=(t,r)=>{if(r<=0){c(t);return}a(i=>i.map(e=>e.id===t?{...e,quantity:r}:e))},f=()=>{a([])},u=()=>s.reduce((t,r)=>t+r.price*r.quantity,0),g=()=>u()*.9;return x.jsx(l.Provider,{value:{cart:s,addToCart:C,removeFromCart:c,updateQuantity:d,clearCart:f,getCartTotal:u,getCartTotalWithDiscount:g},children:n})}function h(){const n=o.useContext(l);if(n===void 0)throw new Error("useCart must be used within a CartProvider");return n}export{m as C,h as u};
